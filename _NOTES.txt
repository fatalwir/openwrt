config device
        option name 'br-lan'
        option type 'bridge'
        list ports 'eth0.1'

config interface 'lan'
        option device 'br-lan'
        option proto 'static'
        option ipaddr '192.168.1.1'
        option netmask '255.255.255.0'
        option ip6assign '60'

config interface 'lan_dhcp'
        option device 'br-lan'
        option proto 'dhcp'


scp bin/targets/ramips/mt76x8/openwrt-ramips-mt76x8-hilink_hlk-7628n-squashfs-sysupgrade.bin  root@192.168.33.198:/tmp


./scripts/feeds update -a
./scripts/feeds install -a
make menuconfig
make -j16 defconfig download clean world

opkg install openssh-sftp-server

After RTC oscillator failure, the OF flag needs to be reset: hwclock --systohc --rtc=/dev/rtc0


TODO:
    TEST slcand if it works automatically - it does not (ttyACM0 appears before the slcan module is loaded, maybe that is a problem?)
    TEST if two processes can use can0 simultaneously
    RTC works, after starting/restarting oscillator it needs to be reset. somehow make it automatic? ntp? (see below)
    make testing package in C using the interface (eth hapcan <-> can hapcan)
    avahi/mdns misto dualni ip konfigurace?
    nedulezite, vyresit "OF: Bad cell count for ..."





----------------------- RTC automatic ----------------------
code by chatgpt, the reset command was different one, see above

/etc/init.d/rtc-osf-fix

#!/bin/sh /etc/rc.common
START=99
start() {
    I2CBUS=0        # change if needed
    ADDR=0x68

    STATUS=$(i2cget -y $I2CBUS $ADDR 0x0F)
    if [ $((STATUS & 0x80)) -ne 0 ]; then
        logger -t rtc-osf "RTC OSF flag set, resetting time"
        # Wait for NTP to set system time
        sleep 5
        hwclock --systohc
    fi
}


chmod +x /etc/init.d/rtc-osf-fix
/etc/init.d/rtc-osf-fix enable
