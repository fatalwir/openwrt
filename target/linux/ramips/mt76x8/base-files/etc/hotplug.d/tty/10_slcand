#!/bin/sh

[ "$DEVICENAME" = "ttyACM0" ] || exit 0

. /lib/functions.sh
. /lib/functions/system.sh

board=$(board_name)

case "$board" in
	hapcan,interface)
		case "$ACTION" in
            add)
                logger -t slcand "Starting slcand on /dev/ttyACM0"
                slcand -o -c -f -s4 /dev/ttyACM0
                sleep 1
                ip link set up can0
                ;;
            remove)
                logger -t slcand "Stopping slcand for /dev/ttyACM0"
                ip link set down can0
                killall slcand
                ;;
        esac
esac


